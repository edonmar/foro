{% extends 'layout.html.twig' %}

{% block title %}
    Listado de temas de {{ categoria.nombre }}
{% endblock %}

{% block content %}
    <h1>Listado de temas de {{ categoria.nombre }}</h1>
    <table class="table table-bordered table-striped table-hover">
        <thead>
        <tr>
            <th class="align-middle">Título</th>
            <th class="align-middle">Número de respuestas</th>
            <th class="align-middle">Creado por</th>
            <th class="align-middle">Última respuesta</th>
        </tr>
        </thead>
        <tbody>
        {% for tema in temas %}
            <tr>
                <td class="align-middle"><a href="{{ path('tema_respuestas_listar', {'id': tema.id}) }}">{{ tema.titulo }}</a></td>
                <td class="align-middle text-center">{{ numRespuestas[loop.index - 1] }}</td>
                <td>
                    <a href="{{ path('usuario_detalles', {'id': tema.usuario.id}) }}">
                        <p>{{ tema.usuario.nombre }}</p>
                    </a>
                    <p>{{ tema.fechaCreacion|date('d/m/Y h:m') }}</p>
                </td>
                <td>
                    <a href="{{ path('usuario_detalles', {'id': ultimaRespuesta[loop.index - 1][0].usuario.id}) }}">
                        <p>{{ ultimaRespuesta[loop.index - 1][0].usuario.nombre }}</p>
                    </a>
                    <p>{{ ultimaRespuesta[loop.index - 1][0].fechaCreacion|date('d/m/Y h:m') }}</p>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="2">No hay ningún tema en la categoría</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <p>
        <a href="{{ path('categoria_listar') }}" class="btn btn-info">
            <i class="fas fa-arrow-left"></i> Volver al listado de categorías
        </a>
    </p>
{% endblock %}

